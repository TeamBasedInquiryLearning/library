<!-- https://doenet.org/portfolioeditor/_PSDg7v5ugo6RBMxFARE3Z/_8sE7bqhRzNAnb33Xfp54o -->

<setup>
  <boolean name="standardBasis">$basisChoice.selectedIndices = 1</boolean>
  <point name="v">(2,3)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <point name="b2">(-2,2)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <point name="b1">(4,1)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <math name="x" simplify>($v.x*$b2.y-$v.y*$b2.x)/($b1.x*$b2.y-$b2.x*$b1.y)</math>
  <math name="y" simplify>(-$v.x*$b1.y+$v.y*$b1.x)/($b1.x*$b2.y-$b2.x*$b1.y)</math>
</setup>

<p>
<choiceInput name="basisChoice" preselectChoice="1">
  <choice>Standard basis {e₁,e₂}</choice>
  <choice>Custom basis {b₁,b₂}</choice>
</choiceInput>
</p>

  <graph xmin="-8" ymin="-8" xmax="8" ymax="8" displayXAxis="$standardBasis" displayYAxis="$standardBasis">
    <line draggable="false" through="(0,0) $b1" styleNumber="2" hide="$standardBasis"/>
    <line draggable="false" through="$b2 $b2+$b1" styleNumber="6" hide="$standardBasis"/>
    <line draggable="false" through="2*$b2 2*$b2+$b1" styleNumber="6" hide="$standardBasis"/>
    <line draggable="false" through="-$b2 -$b2+$b1" styleNumber="6" hide="$standardBasis"/>
    <line draggable="false" through="-2*$b2 -2*$b2+$b1" styleNumber="6" hide="$standardBasis"/>
    <line draggable="false" through="(0,0) $b2" styleNumber="3" hide="$standardBasis"/>
    <line draggable="false" through="$b1 $b1+$b2" styleNumber="6" hide="$standardBasis"/>
    <line draggable="false" through="2*$b1 2*$b1+$b2" styleNumber="6" hide="$standardBasis"/>
    <line draggable="false" through="-$b1 -$b1+$b2" styleNumber="6" hide="$standardBasis"/>
    <line draggable="false" through="-2*$b1 -2*$b1+$b2" styleNumber="6" hide="$standardBasis"/>
    <lineSegment endpoints="(0,0) $v" styleNumber="1"/>
    <point hide="not $standardBasis" coords="$v" styleNumber="1">
      <label><m>\vec v = $v.x\vec e_1+$v.y\vec e_2</m></label>
    </point>
    <point hide="$standardBasis" coords="$v" styleNumber="1">
      <label><m>\vec v = $x\vec b_1+$y\vec b_2</m></label>
    </point>
    <lineSegment endpoints="(0,0) $b1" styleNumber="2"/>
    <point coords="$b1" styleNumber="2">
      <label><m>\vec b_1</m></label>
    </point>
    <lineSegment endpoints="(0,0) $b2" styleNumber="3"/>
    <point coords="$b2" styleNumber="3">
      <label><m>\vec b_2</m></label>
    </point>
  </graph>