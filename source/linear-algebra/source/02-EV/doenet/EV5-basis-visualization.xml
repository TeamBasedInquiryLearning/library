<!-- https://doenet.org/portfolioeditor/_PSDg7v5ugo6RBMxFARE3Z/_8sE7bqhRzNAnb33Xfp54o -->

<setup>
  <boolean name="standardBasis">$basisChoice.selectedIndices = 1</boolean>
  <point name="v">(2,3)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <point name="b2">(-1,3)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <point name="b1">(4,1)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <math name="x" simplify>($v.x*$b2.y-$v.y*$b2.x)/($b1.x*$b2.y-$b2.x*$b1.y)</math>
  <math name="y" simplify>(-$v.x*$b1.y+$v.y*$b1.x)/($b1.x*$b2.y-$b2.x*$b1.y)</math>
</setup>

<p>
<choiceInput name="basisChoice" preselectChoice="1">
  <choice>Standard basis {e₁,e₂}</choice>
  <choice>Custom basis {b₁,b₂}</choice>
</choiceInput>
</p>

  <graph xmin="-8" ymin="-8" xmax="8" ymax="8" displayXAxis="$standardBasis" displayYAxis="$standardBasis">
    <line draggable="false" through="(0,0) $b1" styleNumber="2" hide="$standardBasis"/>
    <line draggable="false" through="(0,0) $b2" styleNumber="3" hide="$standardBasis"/>
    <lineSegment endpoints="(0,0) $v" styleNumber="1"/>
    <point coords="$v" styleNumber="1">
      <label><m>\vec v</m></label>
    </point>
    <point hide="$standardBasis" coords="$x*$b1" styleNumber="1">
      <label><m>$x\vec b_1</m></label>
    </point>
    <lineSegment hide="$standardBasis" endpoints="$x*$b1 $v" styleNumber="6"/>
    <lineSegment hide="$standardBasis" endpoints="$y*$b2 $v" styleNumber="6"/>
    <line draggable="false" through="($v.x,0) $v" styleNumber="6" hide="$notStandardBasis"/>
    <line draggable="false" through="($v.y,0) $v" styleNumber="6" hide="$notStandardBasis"/>
    <point hide="$standardBasis" coords="$y*$b2" styleNumber="1">
      <label><m>$y\vec b_2</m></label>
    </point>
    <lineSegment endpoints="(0,0) $b1" styleNumber="2"/>
    <point coords="$b1" styleNumber="2">
      <label><m>\vec b_1</m></label>
    </point>
    <lineSegment endpoints="(0,0) $b2" styleNumber="3"/>
    <point coords="$b2" styleNumber="3">
      <label><m>\vec b_2</m></label>
    </point>
  </graph>
