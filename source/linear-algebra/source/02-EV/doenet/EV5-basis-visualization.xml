<!-- https://doenet.org/portfolioeditor/_PSDg7v5ugo6RBMxFARE3Z/_8sE7bqhRzNAnb33Xfp54o -->

<setup>
  <boolean name="standardBasis">$basisChoice.selectedIndices = 1</boolean>
  <point name="v">(-2,-3)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <point name="b2">(-1,3)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <point name="b1">(4,1)
    <constraints>
      <constrainToGrid/>
    </constraints>
  </point>
  <math name="x" simplify>($v.x*$b2.y-$v.y*$b2.x)/($b1.x*$b2.y-$b2.x*$b1.y)</math>
  <math name="y" simplify>(-$v.x*$b1.y+$v.y*$b1.x)/($b1.x*$b2.y-$b2.x*$b1.y)</math>
</setup>

<p>
<choiceInput name="basisChoice" preselectChoice="1">
  <choice>Standard basis {e₁,e₂}</choice>
  <choice>Custom basis {b₁,b₂}</choice>
</choiceInput>
</p>

<graph xmin="-8" ymin="-8" xmax="8" ymax="8" displayXAxis="$standardBasis" displayYAxis="$standardBasis">
  <!-- both views -->
  <point coords="$v" styleNumber="1">
    <label><m>\vec v</m></label>
  </point>
  <lineSegment draggable="false" endpoints="(0,0) $v" styleNumber="1"/>
  <point coords="$b1" styleNumber="2">
    <label><m>\vec b_1</m></label>
  </point>
  <lineSegment draggable="false" endpoints="(0,0) $b1" styleNumber="2"/>
  <point coords="$b2" styleNumber="3">
    <label><m>\vec b_2</m></label>
  </point>
  <lineSegment draggable="false" endpoints="(0,0) $b2" styleNumber="3"/>
  <!-- standard basis -->
  <point draggable="false" hide="not $standardBasis" coords="($v.x,0)" styleNumber="1">
    <label><m>$v.x\vec e_1</m></label>
  </point>
  <lineSegment draggable="false" hide="not $standardBasis" endpoints="($v.x,0) $v" styleNumber="6"/>
  <point draggable="false" hide="not $standardBasis" coords="(0,$v.y)" styleNumber="1">
    <label><m>$v.y\vec e_2</m></label>
  </point>
  <lineSegment draggable="false" hide="not $standardBasis" endpoints="($0,$v.y) $v" styleNumber="6"/>
  <!-- nonstandard basis -->
  <line draggable="false" through="(0,0) $b1" styleNumber="2" hide="$standardBasis"/>
  <line draggable="false" through="(0,0) $b2" styleNumber="3" hide="$standardBasis"/>
  <point draggable="false" hide="$standardBasis" coords="$x*$b1" styleNumber="1">
    <label><m>$x\vec b_1</m></label>
  </point>
  <lineSegment draggable="false" hide="$standardBasis" endpoints="$x*$b1 $v" styleNumber="6"/>
  <point draggable="false" hide="$standardBasis" coords="$y*$b2" styleNumber="1">
    <label><m>$y\vec b_2</m></label>
  </point>
  <lineSegment draggable="false" hide="$standardBasis" endpoints="$y*$b2 $v" styleNumber="6"/>
</graph>
